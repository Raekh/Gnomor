{"version":3,"sources":["context/auth-context.js","pages/Auth.js","components/Bookings/BookingList/BookingList.js","components/Spinner/Spinner.js","components/Bookings/BookingChart/BookingChart.js","components/Bookings/BookingControl/BookingControl.js","pages/Bookings.js","components/Modal/Modal.js","components/Backdrop/Backdrop.js","components/Events/EventList/EventItem/EventItem.js","components/Events/EventList/EventList.js","pages/Events.js","components/Navigation/MainNavigation.js","App.js","index.js"],"names":["React","createContext","token","userId","tokenExpiration","login","console","log","auth_context_this","logout","AuthPage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleSwitch","setState","prevState","isLogin","submitHandler","e","preventDefault","email","emailEl","current","value","password","passwordEl","trim","length","requestBody","query","variables","state","fetch","method","body","JSON","stringify","headers","Content-Type","then","res","status","Error","json","resData","data","_resData$data$login","context","catch","err","createRef","react_default","a","createElement","className","onSubmit","htmlFor","type","id","ref","onClick","Component","contextType","AuthContext","bookingList","bookings","map","booking","key","_id","event","title","Date","createdAt","toLocaleDateString","onDelete","bind","Spinner","BOOKINGS_BUCKETS","Cheap","min","max","Normal","Expensive","bookingChart","chartData","labels","datasets","values","_loop","bucket","filteredBookingsCount","reduce","prev","price","push","fillColor","strokeColor","highlightFill","highlightStroke","toConsumableArray","react_chartjs","BookingControl","activeOutputType","onChange","BookingsPage","componentDidMount","fetchBookings","isLoading","Authorization","concat","selectedEvent","deleteBookingHandler","bookingId","filter","b","changeOutputTypeHandler","outputType","content","components_Spinner_Spinner","react","Bookings_BookingControl_BookingControl","BookingList_BookingList","BookingChart_BookingChart","modal","children","canCancel","onCancel","canConfirm","onConfirm","confirmText","backdrop","eventItem","eventId","date","creatorId","onDetail","eventList","events","other","authUserId","EventItem_EventItem","creator","onViewDetail","EventsPage","isActive","fetchEvents","startCreateEventHandler","creating","modalConfirmHandler","titleEl","dateEl","priceEl","description","descriptionEl","updatedEvents","_resData$data$createE","createEvent","modalCancelHandler","showDetailHandler","find","bookEventHandler","Backdrop_Backdrop","Modal_Modal","rows","EventList_EventList","mainNavigation","auth_context","Consumer","react_router_dom","to","App","Provider","Navigation_MainNavigation","react_router","from","exact","path","component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.509aa9a5.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport default React.createContext({\r\n\ttoken           : null,\r\n\tuserId          : null,\r\n\ttokenExpiration : null,\r\n\tlogin           : (token, userId, tokenExpiration) => {\r\n\t\tconsole.log('LOGGING')\r\n\t\tthis.token = token\r\n\t\tthis.userId = userId\r\n\t\tthis.tokenExpiration = tokenExpiration\r\n\t},\r\n\tlogout          : () => {\r\n\t\tthis.token = null\r\n\t\tthis.userId = null\r\n\t\tthis.tokenExpiration = null\r\n\t}\r\n})\r\n","import React, { Component } from 'react'\r\n\r\nimport './Auth.css'\r\nimport AuthContext from '../context/auth-context'\r\n\r\nclass AuthPage extends Component {\r\n\t// state = {\r\n\t// \tisLogin : true\r\n\t// }\r\n\tstatic contextType = AuthContext\r\n\r\n\tconstructor (props) {\r\n\t\tsuper(props)\r\n\t\tthis.emailEl = React.createRef()\r\n\t\tthis.passwordEl = React.createRef()\r\n\t\tthis.state = {\r\n\t\t\tisLogin : true\r\n\t\t}\r\n\t\tconsole.log('%c context', 'color:orange', this.context)\r\n\t}\r\n\r\n\thandleSwitch = () => {\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn {\r\n\t\t\t\tisLogin : !prevState.isLogin\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tsubmitHandler = e => {\r\n\t\te.preventDefault()\r\n\t\tconst email = this.emailEl.current.value\r\n\t\tconst password = this.passwordEl.current.value\r\n\r\n\t\tif (email.trim().length === 0 || password.trim().length === 0) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet requestBody = {\r\n\t\t\tquery     : `\r\n\t\t\tquery Login($email: String!, $password: String!){\r\n\t\t\t\tlogin(email: $email, password: $password){\r\n\t\t\t\t\tuserId\r\n\t\t\t\t\ttoken\r\n\t\t\t\t\ttokenExpiration\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`,\r\n\t\t\tvariables : {\r\n\t\t\t\temail    : email,\r\n\t\t\t\tpassword : password\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!this.state.isLogin) {\r\n\t\t\trequestBody = {\r\n\t\t\t\tquery     : `\r\n\t\t\t\t\tmutation CreateUser($email: String!, $password: String!){\r\n\t\t\t\t\t\tcreateUser(userInput: {\r\n\t\t\t\t\t\t\temail: $email\r\n\t\t\t\t\t\t\tpassword: $password     \r\n\t\t\t\t\t\t}){\r\n\t\t\t\t\t\t\t_id\r\n\t\t\t\t\t\t\temail\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t`,\r\n\t\t\t\tvariables : {\r\n\t\t\t\t\temail    : email,\r\n\t\t\t\t\tpassword : password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tif (this.state.isLogin) {\r\n\t\t\t\t\tif (resData.data.login.token) {\r\n\t\t\t\t\t\tconsole.log('%c resdata', 'color:orange', resData.data.login)\r\n\t\t\t\t\t\tlet { token, userId, tokenExpiration } = resData.data.login\r\n\t\t\t\t\t\tconsole.log('%c token', 'color:red', token)\r\n\t\t\t\t\t\tthis.context.login(token, userId, tokenExpiration)\r\n\t\t\t\t\t\tconsole.log(this.context)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<form className=\"auth-form\" onSubmit={this.submitHandler}>\r\n\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t<label htmlFor=\"email\">E-mail</label>\r\n\t\t\t\t\t<input type=\"email\" id=\"email\" ref={this.emailEl} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t<label htmlFor=\"password\">Password</label>\r\n\t\t\t\t\t<input type=\"password\" id=\"password\" ref={this.passwordEl} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"form-actions\">\r\n\t\t\t\t\t<button type=\"submit\">Submit</button>\r\n\t\t\t\t\t<button type=\"button\" onClick={this.handleSwitch}>\r\n\t\t\t\t\t\tSwitch to {this.state.isLogin ? 'Signup' : 'Login'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default AuthPage\r\n","import React from 'react'\r\n\r\nimport './BookingList.css'\r\n\r\nconst bookingList = props => (\r\n\t<ul className=\"booking__list\">\r\n\t\t{props.bookings.map(booking => {\r\n\t\t\treturn (\r\n\t\t\t\t<li key={booking._id} className=\"booking__item\">\r\n\t\t\t\t\t<div className=\"booking__item-data\">\r\n\t\t\t\t\t\t{booking.event.title} - {new Date(booking.createdAt).toLocaleDateString()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"booking__item-action\">\r\n\t\t\t\t\t\t<button className=\"btn\" onClick={props.onDelete.bind(this, booking._id)}>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t)\r\n\t\t})}\r\n\t</ul>\r\n)\r\n\r\nexport default bookingList\r\n","import React from 'react'\r\n\r\nimport './Spinner.css'\r\n\r\nconst Spinner = () => (\r\n\t<div className=\"spinner\">\r\n\t\t<div className=\"lds-ellipsis\">\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t</div>\r\n\t</div>\r\n)\r\n\r\nexport default Spinner\r\n","import React from 'react'\r\nimport { Bar as BarChart } from 'react-chartjs'\r\n\r\nimport './BookingChart.css'\r\n\r\nconst BOOKINGS_BUCKETS = {\r\n\tCheap     : {\r\n\t\tmin : 0,\r\n\t\tmax : 100\r\n\t},\r\n\tNormal    : {\r\n\t\tmin : 100,\r\n\t\tmax : 200\r\n\t},\r\n\tExpensive : {\r\n\t\tmin : 200,\r\n\t\tmax : 10000\r\n\t}\r\n}\r\n\r\nconst bookingChart = props => {\r\n\tconst chartData = { labels: [], datasets: [] }\r\n\tlet values = []\r\n\tfor (const bucket in BOOKINGS_BUCKETS) {\r\n\t\tconst filteredBookingsCount = props.bookings.reduce((prev, current) => {\r\n\t\t\tif (\r\n\t\t\t\tcurrent.event.price > BOOKINGS_BUCKETS[bucket].min &&\r\n\t\t\t\tcurrent.event.price <= BOOKINGS_BUCKETS[bucket].max\r\n\t\t\t) {\r\n\t\t\t\treturn prev + 1\r\n\t\t\t} else {\r\n\t\t\t\treturn prev\r\n\t\t\t}\r\n\t\t}, 0)\r\n\t\tvalues.push(filteredBookingsCount)\r\n\t\tchartData.labels.push(bucket)\r\n\t\tchartData.datasets.push({\r\n\t\t\tfillColor       : 'rgba(220, 220, 220, 0.5)',\r\n\t\t\tstrokeColor     : 'rgba(220, 220, 220, 0.8)',\r\n\t\t\thighlightFill   : 'rgba(220, 220, 220, 0.75)',\r\n\t\t\thighlightStroke : 'rgba(220, 220, 220, 1)',\r\n\t\t\tdata            : values\r\n\t\t})\r\n\t\tvalues = [ ...values ]\r\n\t\tvalues[values.length - 1] = 0\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"barchart\">\r\n\t\t\t<BarChart data={chartData} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default bookingChart\r\n","import React from 'react'\r\n\r\nimport './BookingControl.css'\r\n\r\nconst BookingControl = props => {\r\n\treturn (\r\n\t\t<div className=\"booking-control\">\r\n\t\t\t<button\r\n\t\t\t\tclassName={props.activeOutputType === 'list' ? 'active' : ''}\r\n\t\t\t\tonClick={props.onChange.bind(this, 'list')}\r\n\t\t\t>\r\n\t\t\t\tList\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclassName={props.activeOutputType === 'chart' ? 'active' : ''}\r\n\t\t\t\tonClick={props.onChange.bind(this, 'chart')}\r\n\t\t\t>\r\n\t\t\t\tChart\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default BookingControl\r\n","import React, { Component, Fragment } from 'react'\r\n\r\nimport AuthContext from '../context/auth-context'\r\n\r\nimport BookingList from '../components/Bookings/BookingList/BookingList'\r\nimport Spinner from '../components/Spinner/Spinner'\r\nimport BookingChart from '../components/Bookings/BookingChart/BookingChart'\r\nimport BookingControl from '../components/Bookings/BookingControl/BookingControl'\r\n\r\nclass BookingsPage extends Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tisLoading  : false,\r\n\t\t\tbookings   : [],\r\n\t\t\toutputType : 'list'\r\n\t\t}\r\n\t}\r\n\r\n\tstatic contextType = AuthContext\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tthis.fetchBookings()\r\n\t}\r\n\r\n\tfetchBookings = () => {\r\n\t\tif (!this.context.token) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.setState({ isLoading: true })\r\n\r\n\t\tconst requestBody = {\r\n\t\t\tquery : `\r\n\t\t\t{\r\n\t\t\t\tbookings\r\n\t\t\t\t{\r\n\t\t\t\t\t_id\r\n\t\t\t\t\tcreatedAt\r\n\t\t\t\t\tevent{\r\n\t\t\t\t\t\t_id\r\n\t\t\t\t\t\ttitle\r\n\t\t\t\t\t\tdate\r\n\t\t\t\t\t\tprice\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`\r\n\t\t}\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json',\r\n\t\t\t\tAuthorization  : `Bearer ${this.context.token}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tconst bookings = resData.data.bookings\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisLoading     : false,\r\n\t\t\t\t\tbookings      : bookings,\r\n\t\t\t\t\tselectedEvent : null\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}\r\n\r\n\tdeleteBookingHandler = bookingId => {\r\n\t\tif (!this.context.token) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.setState({ isLoading: true })\r\n\r\n\t\tconst requestBody = {\r\n\t\t\tquery     : `\r\n\t\t\tmutation CancelBooking($id: ID!){\r\n\t\t\t\tcancelBooking(bookingId: $id)\r\n\t\t\t\t{\r\n\t\t\t\t\t_id\r\n\t\t\t\t\ttitle\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`,\r\n\t\t\tvariables : {\r\n\t\t\t\tid : bookingId\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json',\r\n\t\t\t\tAuthorization  : `Bearer ${this.context.token}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\tconst updatedBookings = prevState.bookings.filter(b => {\r\n\t\t\t\t\t\treturn b._id !== bookingId\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tbookings  : updatedBookings,\r\n\t\t\t\t\t\tisLoading : false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log('%c error', 'color:red', err)\r\n\t\t\t})\r\n\t}\r\n\r\n\tchangeOutputTypeHandler = outputType => {\r\n\t\tif (outputType === 'list') {\r\n\t\t\tthis.setState({ outputType: 'list' })\r\n\t\t} else {\r\n\t\t\tthis.setState({ outputType: 'chart' })\r\n\t\t}\r\n\t}\r\n\r\n\trender () {\r\n\t\tlet content = <Spinner />\r\n\t\tif (!this.state.isLoading) {\r\n\t\t\tcontent = (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<BookingControl\r\n\t\t\t\t\t\tactiveOutputType={this.state.outputType}\r\n\t\t\t\t\t\tonChange={this.changeOutputTypeHandler}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.state.outputType === 'list' ? (\r\n\t\t\t\t\t\t\t<BookingList\r\n\t\t\t\t\t\t\t\tbookings={this.state.bookings}\r\n\t\t\t\t\t\t\t\tonDelete={this.deleteBookingHandler}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<BookingChart bookings={this.state.bookings} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Fragment>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn <Fragment>{content}</Fragment>\r\n\t}\r\n}\r\n\r\nexport default BookingsPage\r\n","import React from 'react'\r\n\r\nimport './Modal.css'\r\n\r\nconst modal = props => (\r\n\t<div className=\"modal\">\r\n\t\t<header className=\"modal__header\">\r\n\t\t\t<h1>{props.title}</h1>\r\n\t\t</header>\r\n\t\t<section className=\"modal__content\">{props.children}</section>\r\n\t\t<section className=\"modal__actions\">\r\n\t\t\t{props.canCancel && (\r\n\t\t\t\t<button className=\"btn\" onClick={props.onCancel}>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{props.canConfirm && (\r\n\t\t\t\t<button className=\"btn\" onClick={props.onConfirm}>\r\n\t\t\t\t\t{props.confirmText}\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</section>\r\n\t</div>\r\n)\r\n\r\nexport default modal\r\n","import React from 'react'\r\n\r\nimport './Backdrop.css'\r\n\r\nconst backdrop = props => <div className=\"backdrop\" />\r\n\r\nexport default backdrop\r\n","import React from 'react'\r\n\r\nimport './EventItem.css'\r\n\r\nconst eventItem = props => (\r\n\t<li key={props.eventId} className=\"event__list-item\">\r\n\t\t<div>\r\n\t\t\t<h1>{props.title}</h1>\r\n\t\t\t<h2>\r\n\t\t\t\t{props.price}€ - {new Date(props.date).toLocaleDateString()}\r\n\t\t\t</h2>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t{props.userId !== props.creatorId ? (\r\n\t\t\t\t<button className=\"btn\" onClick={props.onDetail.bind(this, props.eventId)}>\r\n\t\t\t\t\tView Details\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<p>You are the creator of this event.</p>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t</li>\r\n)\r\n\r\nexport default eventItem\r\n","import React from 'react'\r\nimport EventItem from './EventItem/EventItem'\r\n\r\nimport './EventList.css'\r\n\r\nconst eventList = props => {\r\n\tconst events = props.events.map(event => {\r\n\t\tconsole.log({\r\n\t\t\tevent : event,\r\n\t\t\tother : {\r\n\t\t\t\tauthUserId : props.authUserId,\r\n\t\t\t\tcreatorId  : event.creatorId\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<EventItem\r\n\t\t\t\tkey={event._id}\r\n\t\t\t\teventId={event._id}\r\n\t\t\t\ttitle={event.title}\r\n\t\t\t\tprice={event.price}\r\n\t\t\t\tdate={event.date}\r\n\t\t\t\tuserId={props.authUserId}\r\n\t\t\t\tcreatorId={event.creator._id}\r\n\t\t\t\tonDetail={props.onViewDetail}\r\n\t\t\t/>\r\n\t\t)\r\n\t})\r\n\treturn <ul className=\"event__list\">{events}</ul>\r\n}\r\n\r\nexport default eventList\r\n","import React, { Component, Fragment } from 'react'\r\nimport Modal from '../components/Modal/Modal'\r\nimport Backdrop from '../components/Backdrop/Backdrop'\r\nimport Spinner from '../components/Spinner/Spinner'\r\nimport EventList from '../components/Events/EventList/EventList'\r\nimport './Events.css'\r\nimport AuthContext from '../context/auth-context'\r\n\r\nclass EventsPage extends Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcreating      : false,\r\n\t\t\tevents        : [],\r\n\t\t\tisLoading     : false,\r\n\t\t\tselectedEvent : null\r\n\t\t}\r\n\t\tthis.titleEl = React.createRef()\r\n\t\tthis.priceEl = React.createRef()\r\n\t\tthis.dateEl = React.createRef()\r\n\t\tthis.descriptionEl = React.createRef()\r\n\t}\r\n\r\n\tisActive = true\r\n\r\n\tcomponentDidMount () {\r\n\t\tthis.fetchEvents()\r\n\t}\r\n\r\n\tfetchEvents = () => {\r\n\t\tthis.setState({ isLoading: true })\r\n\t\tconst requestBody = {\r\n\t\t\tquery : `\r\n\t\t\t{\r\n\t\t\t\tevents\r\n\t\t\t\t{\r\n\t\t\t\t\t_id\r\n\t\t\t\t\ttitle\r\n\t\t\t\t\tdescription\r\n\t\t\t\t\tdate\r\n\t\t\t\t\tprice\r\n\t\t\t\t\tcreator{\r\n\t\t\t\t\t\t_id\r\n\t\t\t\t\t\temail\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`\r\n\t\t}\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json'\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tconsole.log(resData)\r\n\t\t\t\tconst events = resData.data.events\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tevents    : events,\r\n\t\t\t\t\tisLoading : false\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t\tthis.setState({ isLoading: false })\r\n\t\t\t})\r\n\t}\r\n\r\n\tstatic contextType = AuthContext\r\n\r\n\tstartCreateEventHandler = () => {\r\n\t\tthis.setState({ creating: true })\r\n\t}\r\n\r\n\tmodalConfirmHandler = () => {\r\n\t\tthis.setState({\r\n\t\t\tcreating : false\r\n\t\t})\r\n\t\tconst title = this.titleEl.current.value\r\n\t\tconst date = this.dateEl.current.value\r\n\t\tconst price = +this.priceEl.current.value\r\n\t\tconst description = this.descriptionEl.current.value\r\n\r\n\t\tif (\r\n\t\t\ttitle.trim().length === 0 ||\r\n\t\t\tprice < 0 ||\r\n\t\t\tdate.trim().length === 0 ||\r\n\t\t\tdescription.trim().length === 0\r\n\t\t) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst event = {\r\n\t\t\ttitle,\r\n\t\t\tdescription,\r\n\t\t\tprice,\r\n\t\t\tdate\r\n\t\t}\r\n\t\tconsole.log(event)\r\n\r\n\t\tconst requestBody = {\r\n\t\t\tquery     : `\r\n\t\t\tmutation CreateEvent(\r\n\t\t\t\t$title: String!, \r\n\t\t\t\t$description: String!,\r\n\t\t\t\t$price: Float!, \r\n\t\t\t\t$date: String!\r\n\t\t\t\t){\r\n\t\t\t\tcreateEvent(eventInput: {\r\n\t\t\t\t\ttitle: $title,\r\n\t\t\t\t\tdescription: $description,\r\n\t\t\t\t\tprice:$price,\r\n\t\t\t\t\tdate: $date\r\n\t\t\t\t})\r\n\t\t\t\t{\r\n\t\t\t\t\t_id\r\n\t\t\t\t\ttitle\r\n\t\t\t\t\tdescription\r\n\t\t\t\t\tdate\r\n\t\t\t\t\tprice\r\n\t\t\t\t\tcreator{\r\n\t\t\t\t\t\t_id\r\n\t\t\t\t\t\temail\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`,\r\n\t\t\tvariables : {\r\n\t\t\t\ttitle       : title,\r\n\t\t\t\tdescription : description,\r\n\t\t\t\tprice       : price,\r\n\t\t\t\tdate        : date\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log(requestBody)\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json',\r\n\t\t\t\tAuthorization  : `Bearer ${this.context.token}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tif (this.isActive) {\r\n\t\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\t\tconst updatedEvents = [ ...prevState.events ]\r\n\t\t\t\t\t\tconsole.log('%c updatedEvents', 'color:red', updatedEvents)\r\n\t\t\t\t\t\tlet { _id, title, description, date, price } = resData.data.createEvent\r\n\t\t\t\t\t\tupdatedEvents.push({\r\n\t\t\t\t\t\t\t_id         : _id,\r\n\t\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\t\tdescription,\r\n\t\t\t\t\t\t\tdate,\r\n\t\t\t\t\t\t\tprice,\r\n\t\t\t\t\t\t\tcreator     : {\r\n\t\t\t\t\t\t\t\t_id : this.context.userId\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log('%c updatedEvents', 'color:green', updatedEvents)\r\n\t\t\t\t\t\treturn { events: updatedEvents }\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}\r\n\r\n\tmodalCancelHandler = () => {\r\n\t\tthis.setState({\r\n\t\t\tcreating      : false,\r\n\t\t\tselectedEvent : null\r\n\t\t})\r\n\t}\r\n\r\n\tshowDetailHandler = eventId => {\r\n\t\tthis.setState(prevState => {\r\n\t\t\tconst selectedEvent = prevState.events.find(e => e._id === eventId)\r\n\t\t\treturn {\r\n\t\t\t\tselectedEvent : selectedEvent\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tbookEventHandler = () => {\r\n\t\tif (!this.context.token) {\r\n\t\t\tthis.setState({ selectedEvent: null })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst requestBody = {\r\n\t\t\tquery     : `\r\n\t\t\tmutation BookEvent($id: ID!){\r\n\t\t\t\tbookEvent(eventId: $id)\r\n\t\t\t\t{\r\n\t\t\t\t\tcreatedAt\r\n\t\t\t\t\tupdatedAt\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t`,\r\n\t\t\tvariables : {\r\n\t\t\t\tid : this.state.selectedEvent._id\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfetch('http://localhost:8000/graphql', {\r\n\t\t\tmethod  : 'POST',\r\n\t\t\tbody    : JSON.stringify(requestBody),\r\n\t\t\theaders : {\r\n\t\t\t\t'Content-Type' : 'application/json',\r\n\t\t\t\tAuthorization  : `Bearer ${this.context.token}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tif (res.status !== 200 && res.status !== 201) {\r\n\t\t\t\t\tthrow new Error('Failed')\r\n\t\t\t\t}\r\n\t\t\t\treturn res.json()\r\n\t\t\t})\r\n\t\t\t.then(resData => {\r\n\t\t\t\tif (this.isActive) {\r\n\t\t\t\t\tconsole.log(resData)\r\n\t\t\t\t\tthis.setState({ selectedEvent: null })\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t}\r\n\r\n\tcomponentWillUnmount () {\r\n\t\tthis.isActive = false\r\n\t}\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t{(this.state.creating || this.state.selectedEvent) && <Backdrop />}\r\n\t\t\t\t{this.state.creating && (\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\ttitle=\"Add Event\"\r\n\t\t\t\t\t\tcanCancel\r\n\t\t\t\t\t\tcanConfirm\r\n\t\t\t\t\t\tonCancel={this.modalCancelHandler}\r\n\t\t\t\t\t\tonConfirm={this.modalConfirmHandler}\r\n\t\t\t\t\t\tconfirmText=\"Confirm\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<form>\r\n\t\t\t\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"title\">Title</label>\r\n\t\t\t\t\t\t\t\t<input type=\"text\" id=\"title\" ref={this.titleEl} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"price\">Price</label>\r\n\t\t\t\t\t\t\t\t<input type=\"Number\" id=\"price\" ref={this.priceEl} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"date\">Date</label>\r\n\t\t\t\t\t\t\t\t<input type=\"datetime-local\" id=\"date\" ref={this.dateEl} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-control\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"description\">Description</label>\r\n\t\t\t\t\t\t\t\t<textarea id=\"description\" ref={this.descriptionEl} rows=\"4\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.state.selectedEvent && (\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\ttitle={this.state.selectedEvent.title}\r\n\t\t\t\t\t\tcanCancel\r\n\t\t\t\t\t\tcanConfirm\r\n\t\t\t\t\t\tonCancel={this.modalCancelHandler}\r\n\t\t\t\t\t\tonConfirm={this.bookEventHandler}\r\n\t\t\t\t\t\tconfirmText={this.context.token ? 'Book' : 'Confirm'}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<h1>{this.state.selectedEvent.title}</h1>\r\n\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t{this.state.selectedEvent.price}€ -{' '}\r\n\t\t\t\t\t\t\t{new Date(this.state.selectedEvent.date).toLocaleDateString()}\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p>{this.state.selectedEvent.description}</p>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.context.token && (\r\n\t\t\t\t\t<div className=\"events-control\">\r\n\t\t\t\t\t\t<p>Share your own Events !</p>\r\n\t\t\t\t\t\t<button className=\"btn\" onClick={this.startCreateEventHandler}>\r\n\t\t\t\t\t\t\tCreate Event\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t{this.state.isLoading ? (\r\n\t\t\t\t\t<Spinner />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<EventList\r\n\t\t\t\t\t\tevents={this.state.events}\r\n\t\t\t\t\t\tauthUserId={this.context.userId}\r\n\t\t\t\t\t\tonViewDetail={this.showDetailHandler}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default EventsPage\r\n","import React, { Fragment } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nimport './MainNavigation.css'\r\nimport AuthContext from '../../context/auth-context'\r\n\r\nconst mainNavigation = props => (\r\n\t<AuthContext.Consumer>\r\n\t\t{context => {\r\n\t\t\treturn (\r\n\t\t\t\t<header className=\"main-navigation\">\r\n\t\t\t\t\t<div className=\"main-navigation__logo\">\r\n\t\t\t\t\t\t<h1>EasyEvent</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<nav className=\"main-navigation__items\">\r\n\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t{!context.token && (\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<NavLink to=\"/auth\">Login</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<NavLink to=\"/events\">Events</NavLink>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t{context.token && (\r\n\t\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink to=\"/bookings\">Bookings</NavLink>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\t\t\tto=\"/events\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={context.logout}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t</header>\r\n\t\t\t)\r\n\t\t}}\r\n\t</AuthContext.Consumer>\r\n)\r\n\r\nexport default mainNavigation\r\n","import React, { Component, Fragment } from 'react'\nimport { BrowserRouter, Route, Redirect, Switch } from 'react-router-dom'\n\nimport AuthPage from './pages/Auth'\nimport BookingsPage from './pages/Bookings'\nimport EventsPage from './pages/Events'\nimport MainNavigation from './components/Navigation/MainNavigation'\n\nimport AuthContext from './context/auth-context'\n\nimport './App.css'\n\nclass App extends Component {\n\tstate = {\n\t\ttoken  : null,\n\t\tuserId : null\n\t}\n\n\tlogin = (token, userId, tokenExpiration) => {\n\t\tthis.setState({ token, userId, tokenExpiration })\n\t}\n\n\tlogout = () => {\n\t\tthis.setState({ token: null, userId: null, tokenExpiration: null })\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<BrowserRouter>\n\t\t\t\t<Fragment>\n\t\t\t\t\t<AuthContext.Provider\n\t\t\t\t\t\tvalue={{\n\t\t\t\t\t\t\ttoken  : this.state.token,\n\t\t\t\t\t\t\tuserId : this.state.userId,\n\t\t\t\t\t\t\tlogin  : this.login,\n\t\t\t\t\t\t\tlogout : this.logout\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MainNavigation />\n\t\t\t\t\t\t<main className=\"main-content\">\n\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t{this.state.token && <Redirect from=\"/\" to=\"/events\" exact />}\n\t\t\t\t\t\t\t\t{this.state.token && <Redirect from=\"/auth\" to=\"/events\" exact />}\n\t\t\t\t\t\t\t\t{!this.state.token && <Route path=\"/auth\" component={AuthPage} />}\n\n\t\t\t\t\t\t\t\t<Route path=\"/events\" component={EventsPage} />\n\n\t\t\t\t\t\t\t\t{this.state.token && <Route path=\"/bookings\" component={BookingsPage} />}\n\t\t\t\t\t\t\t\t{!this.state.token && <Redirect to=\"/auth\" exact />}\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</main>\n\t\t\t\t\t</AuthContext.Provider>\n\t\t\t\t</Fragment>\n\t\t\t</BrowserRouter>\n\t\t)\n\t}\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}